# ElectricLinesOfForce
MatLabで、電荷の電気力線を3Dプロットするプログラムを書こう。

# 1.目的
コンデンサを用いた比誘電率測定器の開発をしたい。  
比誘電率測定器で測るものの厚さの上限を例えば3cmとすると、端効果を無視するにはそれ相応の広い極板が必要になるが、これでは使い勝手が悪いため、端効果を考慮した上での設計となる。  
コンデンサの端効果は初等関数では説明しきれないということがわかっている。  
電磁気学の教授に伺ったところ、複素関数論の「等角写像」の知識が必要であるそう。  
等角写像を理解するのは大変そうであったことや、コンデンサの条件を少し変えたときに視覚的にその影響が容易にわかれば便利だということで、  
電荷を置いたら電気力線を3Dプロットするプログラムを書こうと思いついた。

# 2.実験

## 2.1 実験1 単純な電場計算プログラムの開発
電気力線とはつまり「電場を可視化したもの」である。  
電場はベクトル場であるから、それを可視化した電気力線は「電場ベクトルの軌跡」に他ならない。  
従って、電気力線をプロットするためには、任意の座標における電場ベクトルの計算が必要になる。 

### 2.1.1 実験1の手順 
 
空間εにおいて、点(a,b,c)にある電荷Qが点(x,y,z)に作る電場は、  
(Q/(4πε(((x-a)^2+(y-b)^2+(z-c)^2)^1.5)))(x-a,y-b,z-c)  
である。これを求める関数electricField(a,b,c,x,y,z)をMatLabで作ろう。  
但し、Q=16,ε=1で一定とする。  
次のようなMatLab関数[electricField.m](https://github.com/17ec084/grade2-2/blob/master/electromagnetism/ElectricLinesOfForce/electricField.m) を作成した。
```MATLAB
function [i,j,k] = electricField( a,b,c,x,y,z )
%electricField 点Aが点Pに作る電場ベクトルを求める
%   点A(a,b,c)、点P(x,y,z)

%E=(Q/(4πε(((x-a)^2+(y-b)^2+(z-c)^2)^1.5)))(x-a,y-b,z-c)
%まずスカラを求める。
%(ベクトル自体の長さがあるので、スカラはrの2乗ではなく3乗で割ること。
Q=16;
epsilon=1;
scalar=Q/(4*pi*epsilon*(((x-a)^2+(y-b)^2+(z-c)^2)^1.5));
i=scalar*(x-a);
j=scalar*(y-b);
k=scalar*(z-c);

end

 
```

### 2.1.2 実験1の結果

MATLABのコマンドラインで次のように入力した。

```
[i,k,j]=electricField(1,0,0,0,0,0);
v=[i,k,j];

``` 

これは(1,0,0)に置いた電荷が(0,0,0)に作る電場ベクトルを求めるものである。  

すると変数vは`[-1.273239544735163,0,0]`となった。これは電場ベクトルが(-1.273239544735163,0,0)であるということを意味する。

## 2.2 実験2 単純な電気力線のプロット
電気力線、電場ベクトルの軌跡とはつまり、可動な正電荷の軌跡である。  
そのため電気力線をプロットする一つの方法として、電場ベクトルに従って正電荷を動かし、正電荷の軌跡をプロットするというものが挙げられる。 
### 2.1.1 実験1の手順 
 
これを実現するためには、次の手順を踏む必要がある。  
但し点(a,b,c)はもともと存在している電荷の座標、点(x,y,z)は電気力線をプロットすべき座標(つまり可動正電荷の座標)とする。  
またプロットすべき3D空間は|x|<100,|y|<100,|z|<100とする。  
(1) (x,y,z)≒(a,b,c)とし(但し等号不可)、これを電気力線の始点とする。  
(2) (x,y,z)をelectricField(a,b,c,x,y,z)だけ動かし、これを電気力線の終点とする  
(3) その点を次の電気力線の始点とする  
(4) (2)と(3)を、(x,y,z)がプロットすべき空間を飛び出るまで繰り返す  

(1)(2)次のようなMatLab関数[plotEV.m]()を作成した。  

```MATLAB

function [Ex,Ey,Ez]=plotEV( a,b,c, dx,dy,dz )
%   electricField 点Aが作る電場ベクトルを点Dからプロットする
%   点A(a,b,c)、点D(a+dx,b+dy,c+dz)
%   戻り値は描画した電場ベクトル。

%点Aと点Dが重なってしまうと方向が決まらないのでエラーを返す。
if [dx,dy,dz]==[0,0,0]
 fprintf("plotEL1メソッド実行中にエラー。電荷の存在する座標から出発することはできない。\n");
 return
end


x=a+dx;
y=b+dy;
z=c+dz;

%電場ベクトル(の大きさlengthOfEと単位ベクトルunitOfE)を求める
[Ex,Ey,Ez]=electricField( a,b,c, x,y,z );
%lengthOfE=(Ex^2+Ey^2+Ez^2)^0.5;
%unitOfE=[Ex/lengthOfE,Ey/lengthOfE,Ez/lengthOfE];


x=[0,Ex];
y=[0,Ey];
z=[0,Ez];
x=x+a+dx;
y=y+b+dy;
z=z+c+dz;

plot3(x,y,z);
 
```



<!--今後の実験予定-->
・2.1を平面プロットする
・2.1を3Dプロットする
・電荷が複数ある場合
・途中で誘電率が変わる場合