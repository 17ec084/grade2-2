# 1.実験日の気温、湿度、天候

実験日:<!-- 実験日を記入せよ -->
<!-- 実験日ここまで -->
  
気温:<!-- 気温を記入せよ -->
<!-- 気温ここまで -->
  
湿度:<!-- 湿度を記入せよ -->
<!-- 湿度ここまで -->
  
天候:<!-- 天候を記入せよ -->
<!-- 天候ここまで -->
  
# 2.実験の目的

<!-- 目的を記入せよ -->
<!-- 目的ここまで -->

# 3.使用機器

使用した機器は表3の通りである。

表3　使用機器

<!-- 使用機器の表をMD記法で作成せよ -->

| 部材 | 数量 | メーカ名、型番、定格など |
| --- | --- | --- |

<!-- 使用機器の表ここまで -->

# 4.実験内容と結果

### 4.1.1 実験1 <!-- 実験1の名前を記入せよ --><!-- 実験1の名前ここまで -->

<!-- 実験1の内容を記入せよ -->

<!-- 実験1の内容ここまで -->

### 4.1.2 実験1の結果

<!-- 実験1の結果の内容を記入せよ -->

<!-- 実験1の結果の内容ここまで --> 

### 4.2.1 実験2 <!-- 実験2の名前を記入せよ --><!-- 実験2の名前ここまで -->

<!-- 実験2の内容を記入せよ -->

<!-- 実験2の内容ここまで -->

### 4.2.2 実験2の結果

<!-- 実験2の結果の内容を記入せよ -->

<!-- 実験2の結果の内容ここまで -->

<!-- 以降の実験を記入せよ -->

<!-- 以降の実験ここまで -->

# 5.検討事項

## 5.1

_<!-- 検討事項1の問題文を記入せよ -->サンプリング(標本化)とは何にかについて説明せよ。また、サンプリング定理について実験に基づいて具体的に説明せよ<!-- 検討事項1の問題文ここまで -->_

サンプリングはAD変換の作業の一過程である。本来、音は連続信号であるため、その一瞬、一瞬のアナログ量をすべて記録していった場合、データは限りなく大きくなってしまうため、通常は単位時間あたりに一定数回だけ信号の瞬間的なアナログ量を記録する。これをサンプリング(標本化)といい、単位時間当たりのサンプリングの回数をサンプリング周波数という。

サンプリング周波数は、元の信号に含まれる(最大の)周波数成分の2倍よりも大きい必要があり、これをサンプリング定理という。実験5ではサンプリング周波数を2000[Hz]として、0～2000[Hz]正弦波をサンプリングしたが、図4.2.4.1からわかる通り、サンプリング定理を満足しなくなる1000～2000[Hz]の正弦波に関しては、一度サンプリングしたものを再び信号として復元したfoutが元の信号fとは異なるものになってしまっている。

## 5.2

_量子化とは何かについて、実験に基づいて具体的に説明せよ。_

量子化とは、AD変換の作業の一過程であり、次の不等式が成り立つように、アナログ量を量子化単位の整数倍(即ちデジタル値)で近似することをいう。

(元の量=アナログ量)－(量子化単位の整数倍=デジタル値)＝(量子化誤差)\&lt;量子化単位

実験4においても、本来整数で表されるとは限らない波形の瞬時値を、最近の整数に近似して数列に変換した。

また5.1で述べたサンプリングと量子化を行うことが、AD変換である。

## 5.3

_実験1の表1.1において、量子化誤差_Vout?V_[V]を計算せよ。また、入力電圧値_V_に対する量子化誤差の変化をグラフにせよ。計算は表1.1で行う。_

_但し、入力電圧を独立変数(横軸)、量子化電圧を従属変数(縦軸)とせよ。_

　量子化誤差については、表1.1に示した通りである。また、これをグラフにすると、図5.3のようになる。

図5.3

## 5.4

_検討事項3で得られたグラフについて、量子化誤差の変化について考察せよ。_

アナログ量が量子化単位の整数倍未満の範囲で、量子化単位の整数倍に近づけば近づくほど、量子化誤差が大きくなる。これは、アナログ量がデジタル値に変換されるとき、四捨五入ではなく切り捨てが行われるからである。

また、図5.3における入力電圧の軸に平行な破線は量子化単位電圧を表している。量子化誤差がこの波線を跨ぐことがなかったという事実から、検討事項3でも述べた通り、量子化誤差は量子化単位電圧未満になるということが読み取れる。

また図5.3では量子化誤差の特性の一部が破線となっているが、これは実測していない部分を理想的な特性で示したものである。量子化誤差が量子化単位電圧に限りなく近づくと同時に0[V]になる。また量子化誤差が0[V]になるときの入力電圧は常に量子化単位電圧の整数倍である。入力電圧が1.9[V]のときはその例外となっていて、量子化誤差が量子化単位電圧よりも0.02[V]小さいとき、量子化誤差が0[V]でなく-0.02[V]となっているが、これは実験時に入力電圧の誤差に起因するものであると考えられる。

## 5.5

_実験1において、A/D変換器の入力電圧の範囲(入力信号レンジ)が0～10.24[V]であり、かつ量子化ビット数が8bitである場合の量子化単位電圧を導出せよ。_

0～10.24 Vを、8ビット=28通り=256通りで表現すればよい。

ディジタル値とアナログ量が最大の場合を考えると、

256=(10.24量子化単位)

であるから

量子化単位=10.24256

が成り立つ。

従って、

10.24256=0.04Vが量子化電圧単位である。

## 5.7

_実験3において、サンプル&amp;ホールド回路について具体的に説明せよ。_

サンプル&amp;ホールド信号は、以下のようなことを実現させることで、AD変換中に電圧値が変わることによる矛盾を避けるためのものである。
・サンプル&amp;ホールド信号がHのときの瞬時値をAD変換の対象とする。
・サンプル&amp;ホールド信号がLである間に対象となった瞬時値に対してAD変換を行う。

以上

従って、サンプル&amp;ホールド信号の周期はそのままサンプリング周期となるし、サンプリング信号がLである期間は、AD変換の全過程を行えるだけの長さである必要がある。

サンプル&amp;ホールド信号がHのときのviの瞬時値を、サンプル&amp;ホールド信号がLである間voに出力し続ける回路をサンプル&amp;ホールド回路という。サンプル&amp;ホールド回路は図5.7のように構成することができる。
# [1]

 

図5.7 サンプル&amp;ホールド回路

## 5.8

_実験3において、入力電圧が4.30[V]であった場合の逐次型A/D変換器のアルゴリズム⑩を参考にして、A/D変換の手順を予測せよ。量子化誤差を求めること。_

　実験3同様の手順で計算する。

4.30?(27×0.04)=?0.82[V]
より、27に対応するビットは0となる。

4.30?(26×0.04)=1.74[V]
より、26に対応するビットは1となる。

4.30?(25×0.04+26×0.04)=0.46[V]
より、25に対応するビットは1となる。

4.30?(24×0.04+25×0.04+26×0.04)=?0.18[V]
より、24に対応するビットは0となる。

4.30?(23×0.04+25×0.04+26×0.04)=0.14[V]
より、23に対応するビットは1となる。

4.30?(22×0.04+23×0.04+25×0.04+26×0.04)=?0.02[V]
より、22に対応するビットは0となる。

4.30?(21×0.04+23×0.04+25×0.04+26×0.04)=0.06[V]
より、21に対応するビットは1となる。

4.30?(20×0.04+21×0.04+23×0.04+25×0.04+26×0.04)=0.02[V]
より、20に対応するビットは1となる。また、ここで残った0.02[V]が量子化誤差である。

## 5.9

_実験5において、サンプリング定理を満足する入力信号の周波数条件を理由も含めて説明せよ。_

　検討事項1でも示した通り、信号に含まれる(最大の)周波数成分は、サンプリング周波数の半分よりも小さい必要がある。その為、サンプリング周波数が2000[Hz]である実験後では、入力信号の周波数は1000[Hz]以下である必要がある。

　では、なぜ信号の周波数成分がサンプリング周波数fsの半分、即ち1000[Hz]を超えるといけないのだろうか。

　正弦波信号の周波数f
が1000[Hz]を超えないとき、この信号を周波数領域で表現すると、図5.9.1のようになる。これをサンプリング周波数2000[Hz]でサンプリングしたものは、図5.9.2のように周波数
f
の正弦波を意味すると同時に、
f+fs
や
f+2fs
など、
fs
の整数倍だけ増加した周波数を持つ正弦波を同時に意味する。したがって、周波数
f
の正弦波信号をサンプリングしたものを周波数領域で表示すると図5.9.3のようになる。
# [2]
サンプリングによって新たに生じた周波数成分(破線)が元の信号を意味する成分(実線)の領域に重なるということはない。そのため図5.9.3で表されるサンプリングした結果の信号から、図5.9.1のサンプリング前の信号を復元するためには、
?1000[Hz]
から
1000[Hz]
の範囲の周波数成分のみを取り出すフィルターを通すことで、図5.9.5のように、元の信号のみを取り出すことができる。

　f
が1000[Hz]を超えるとき、この信号を周波数領域で表現すると、図5.9.4のようになる。これをサンプリング周波数2000[Hz]でサンプリングしたものも、図5.9.2の通り
fs
の整数倍だけ増加した周波数を持つ正弦波を同時に意味する。しかしこれを周波数領域で表示すると図5.9.6のように、サンプリングによって新たに生じた周波数成分(破線)が元の信号を意味する成分(実線)の領域に重なってしまう。そのためフィルタに通しても、破線で示した成分が混ざってしまい、図5.9.4と同じ信号を取り出すことができない。

　以上の議論より、サンプリング周波数は、信号に含まれる最大の周波数成分の2倍以上である必要があることがわかる。

　また、信号を周波数領域で表示したものを「スペクトル」という。

+WmdRU5w4BHREREpDMMeEREREQ6w4BHREREpDMMeEREREQ6w4BHREREpDMMeEREREQ6w4BHREREpDMMeEREREQ6w4BHREREpDMMeEREREQ6w4BHREREpDMMeEREREQ6w4BHREREpDMMeEREREQ6w4BHREREpDMMeEREREQ6w4BHREREpDMMeEREREQ6w4BHREREpDMMeEREREQ6w4BHREREpDMMeEREREQ6w4BHREREpDMMeEREREQ6w4BHREREpDMMeEREREQ6w4BHREREpDMMeEREREQ6w4BHREREpDMMeEREREQ6w4BHREREpDMMeEREREQ6w4BHREREpDMMeEREREQ6w4BHREREpDMMeEREREQ6w4BHREREpDMMeEREREQ6w4BHREREpDMMeEREREQ6w4BHREREpDMMeEREREQ683/G5LG+4wf8IAAAAABJRU5ErkJggg==)
 !

_読みにくいのでなぞること(この文章は修正液で消す)_

_次のページ図5.9.2は図番号を入れよ。またサンプリングしたポイントはボールペンで再度強調せよ(この文章は修正液で消す)_

 

但し図5.9.2は周波数1[MHz]の正弦波入力(黒で示した正弦波)を、サンプリング周波数3[MHz]でサンプリングしたものを例として表示した。強調されている点がサンプルされている瞬時値である。サンプリングされたデータから正弦波を復元することは、サンプルされた瞬時値を通る正弦波を求めることであるから、当然黒で示した1[MHz]の正弦波も求められるが、そのほかにも4[MHz]の正弦波(赤)や7[MHz]の正弦波(青)、10[MHz]の正弦波(緑)なども求められてしまう。


 

_両側足して±4000Hzの軸も作る(この文章は修正液で消す)_

## 5.10

_実験5の⑭を参考にして、D/A変換器の出力にフィルタを接続する理由について実験に基づいて具体的に説明せよ。_

　検討事項9でも議論した通り、サンプリングした結果の信号は、元の信号を意味すると同時に、元の信号の整数倍の周波数を持つ信号を同時に意味する。実験5の結果でも述べたが、実験5(6)で得られた、フィルタを通す前の波形はGNDに対して平行な線分と垂直な線分のみで構成しなおした波形となっていたが、この波形は元の信号の整数倍の周波数を持つ信号の総和であったと考えられる。これをフィルタに通し、限られた周波数領域の成分のみを取り出すことで、元の信号の成分のみを取り出すことができたため、実験5においてフィルタの出力では、サンプリング定理を満足する限りは元の信号と同じものが得られたのであると考えられる。

# 6.吟味

## 6.1 サンプル&amp;ホールド回路とオペアンプ

サンプル&amp;ホールド回路は図5.7の通り、オペアンプが使用されるが、オペアンプがどのような役割を果たすことでこの回路を実現させているのだろうか。このことについて吟味する。

# [3]

まず、オペアンプは+端子と-端子の電圧差v&#39;
を増幅するものである。この利得を
Ad(≫1)
とすると、常に

vo=Adv&#39;

が成り立つ。サンプルホールド信号がHの時のvi
を
vih
、Lの時の
vi
を
vil
とする。

サンプル&amp;ホールド信号がHの時、

v&#39;=vih?vo

が成り立つので、

vo=Adv&#39;

に代入して解くと、

vo=Ad1+Advih

Ad≫1
より

vo=vih

とみなせる。

サンプル&amp;ホールド信号がLの時、

これがある程度の期間であれば、+端子にはコンデンサに充電された電圧vih
が+端子に入力されるので、
vil
に関係なく前述通りの式

vo=vih

が成り立つ。

以上のようにして、サンプル&amp;ホールド回路はサンプル&amp;ホールド信号がHの時のvi
を出力し続ける。

## 6.2 サンプリング定理を拡張して利用した暗号通信

### 6.2.1 目的

信号を瞬時に暗号化することで、秘匿通信に寄与する技術を考えると同時に、サンプリングの本質を再発見すること。

### 6.2.2 理論

　5.9における議論によって、サンプリング定理を満たさずにサンプリングを行ってしまうと、周波数成分が混じってしまい、元の信号が正しく復元できなくなってしまうことが理解できた。そこで、周波数成分の混じり方を定量的に述べ、さらに盗聴者にはわからぬようコントロールすることができれば、意図的に信号(の高域)に雑音を混ぜることができるはずである。あとは、この雑音を取り除くためのデータを、盗聴者が利用できない形で受信者に送信することができれば、「サンプリング定理を満たさないサンプリング」によって暗号通信を行えるということがいえる。

### 6.2.3 検討

例えば図6.2.2.1のように、最大周波数成分の周波数fk
が2である波形を考えよう。

 

図6.2.2.1 テスト波形のスペクトル(最大周波数fk=2
)

サンプリング定理を満足しないのはfs?2fk=4
のときである。

fk?fs?2fk
のとき、

例えばfs=3
でテスト波形をサンプリングしてできる波形は図6.2.2.2の実線の通り。但し、破線は参考のためにテスト波形を示したものである。

 

図6.2.2.2 テスト波形をサンプリングしたスペクトル(fk=2,fs=3
)

一般に0?f?fk
以外の領域については、領域
0?f?fk
に含まれる情報のコピーでしかないため議論する必要がない。図6.2.2.2の
0?f?fk
の領域における実線と破線を比較してみよう。まずこの領域において実線と破線に分かれているのは

fs?fk\&lt;f?fk
(今回は
1\&lt;f?2
)の領域である。実線と破線がわかれていることは、その部分の周波数成分が失われていることを意味する。

　この領域のスペクトルは、元の波形のスペクトル(fs?fk\&lt;f?fk
)にこれの左右を反転させたものを加えたものである。したがって、この領域における元の波形のスペクトル(破線)を関数
Forginal(f&#39;)
、サンプリングしたスペクトル(実線)を
関数
Foverlaped(f&#39;)
と置くと、(但し
f&#39;=f?(fs/2)
、今回は
f&#39;=f?1.5
)

Foverlaped(f&#39;)=Foriginal(f&#39;)+Foriginal(?f&#39;)

と表される。但しf&#39;
は、議論を簡単にするために左右反転を行う際の軸を原点に平行移動したために用いた変数である。定義域が
1\&lt;f?2
のとき、横軸変数を
f&#39;
に変更すればその定義域は
?0.5\&lt;f&#39;?0.5
となり、
f&#39;
に-1をかけるだけで関数の左右反転が実現するようになる。
(
?0.5\&lt;f&#39;?0.5
を一般化すると、
?(fk?(fs/2))\&lt;f&#39;?fk?(fs/2)
)

ここでFoverlaped(f&#39;)
について整理しよう。

定義域は?(fk?(fs/2))\&lt;f&#39;?fk?(fs/2)
であり、これを

?foverlapping\&lt;f&#39;?foverlapping
としよう。
サンプリング後のスペクトルや波形のみを知っている人物(受信者と呼ぶことにする)は
Foverlaped(f&#39;)
全体を知ることができるが、
Foriginal(f&#39;)
を知ることはできない。

　受信者にForiginal(f&#39;)
の、
?foverlapping\&lt;f&#39;?0
の部分のみを教えよう。(但しサンプリング周波数はさらに大きくする※)。すると理論上は、受信者は

Foriginal(?f&#39;)=Foverlaped(f&#39;)?Foriginal(f&#39;)

を計算し、

Foriginal(?f&#39;)
の
?foverlapping\&lt;f&#39;?0
の部分

すなわち

Foriginal(?f&#39;)
の
0??f&#39;\&lt;foverlapping
の部分を知ることができる。

これは

Foriginal(f&#39;)
の
0?f&#39;\&lt;foverlapping
を知ったことと本質的に同じなので、

結局Foriginal(f&#39;)
全体を知ることができる。

　しかし現実的には、受信者はf&#39;?f=fs/2
(今回の場合は1.5)を知らない限り
Foriginal(f&#39;)
を復元することはできない。また※のことより、

Foriginal(f&#39;)
の
?foverlapping\&lt;f&#39;?0
のデータ長から
f&#39;?f
を推測することも出来ない。

　以上の議論により、fk?fs?2fk
のとき、「サンプリングとは
fs
を共通鍵とした共通鍵暗号化を行う作業である」ということができる。但しこの暗号を利用する場合、受信者に
Foriginal(f&#39;)
の、
?foverlapping\&lt;f&#39;?0
、即ち

平文信号のfs?fk\&lt;f?(fs/2)
を、より大きなサンプリング周波数でサンプリングしたものを送信しなければならない。

　fs?fk
のとき、

例えばfs=1
でテスト波形をサンプリングしてできる波形は図6.2.2.3の実線の通り。但し、破線は参考のためにテスト波形や新たに生じた周波数成分の一部を示したものである。

 

図6.2.2.3 テスト波形をサンプリングしたスペクトル(fk=2,fs=1
)

この場合、全ての領域において破線と実線が分かれてしまっている。これは、元の信号の周波数成分と、サンプリングによって新たに生じた周波数成分がすべての領域において重なり、また複数回重なる領域が存在するためである(今回は黒の破線に対して赤、青、緑の3つ、負の領域にも同じことがいえるので3×2=6つが重なっている)。複数回重なる領域が存在している以上、暗号化に利用するためには、重なる回数に基づいてさらに細かく場合分けして議論するなどの必要が出てきてしまい、非常に複雑になってしまうので、ここでは議論を避ける。

# 参考資料

[1] IC回路技術基礎講座―アナログICの基礎 (株)工学研究社 三谷政昭著 p82

[2] ユーザーズデジタル信号処理 東京電機大学出版局 江原義郎著 p6~9

[3] アナログ電子回路の基礎 オーム社 藤井信生著 p141~142